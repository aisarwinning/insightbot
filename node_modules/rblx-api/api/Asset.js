const essentials = require("../modules/essentials.js");
exports.getCommentsOnAsset = function(assetID, callback) {
    if((!assetID) || (!callback)) throw new Error("You are missing arguments from getCommentsOnAsset, please refer to the documentation!");
    essentials.requestURL(`https://www.roblox.com/API/Comments.ashx?rqtype=getComments&assetID=${assetID}&startIndex=0`).then(function(promise) {
        const parsedBody = JSON.parse(promise.body);
        callback(parsedBody.data); //Returns an array of objects about the comments on the asset.
    });
};

exports.getInformationFromAsset = function(id, callback) {
    if((!id) || (!callback)) throw new Error("You are missing arguments from getInformationFromAsset, please refer to the documentation!");
    essentials.requestURL(`https://api.roblox.com/Marketplace/ProductInfo?assetId=${id}`).then(function(promise) {
        const parsedBody = JSON.parse(promise);
        callback(parsedBody); // Returns the parsed json from the body.
    });
};

exports.getAssetsForPackage = function(id, callback) {
    if((!id) || (!callback)) throw new Error("You are missing arguments from getAssetsForPackage, please refer to the documentation!");
    essentials.requestURL(`https://www.roblox.com/Game/GetAssetIdsForPackageId?packageId=${id}`).then(function(promise) {
        callback(promise); // Returns a array of all the ids.
    });
};