const request = require("request");
module.exports = {
  requestURL: function(requestLink) {
    return new Promise(function(resolve, reject) {
      const parsedRequest = requestLink.toString();
      request(requestLink, function(error, response, body) {
        if (error) reject(`Error with your request: ${error.stack}`);
        resolve(body);
      });
    });
  },

  errorCheck: function(requestBody) {
    if (!requestBody) throw new Error("No body provided!");
    if (requestBody.includes("BadRequest") || requestBody.includes("InternalServerError"))
      throw new Error("Whatever you searched for, doesn't exist, or roblox errored.");
  },

  checkUserExistance: function(userID) {
    if (!userID) throw new Error("No userID provided!");
    this.requestURL(`https://api.roblox.com/Users/${userID}`).then(function(promise) {
      const parsedBody = JSON.parse(promise.body);
      if (parsedBody.errors["code"] == "404") throw new Error("User was not found!");
    });
  }
};